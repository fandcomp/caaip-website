---
import Base from '../../../layouts/Base.astro';
import ArticleCard from '../../../components/ArticleCard.astro';
import { getPublishedNews } from '../../../lib/posts.ts';

import matter from 'gray-matter';

const news = Object.values(import.meta.glob('../../../../content/berita/*.md', { query: '?raw', import: 'default', eager: true })).map(m => matter(m));
const publishedNews = (await getPublishedNews(news));
---

<Base title="Berita" description="Berita CAAIP">
  <section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4">
      <h1 class="text-4xl font-bold mb-8 text-blue-900 border-b-4 border-blue-600 pb-2">Berita</h1>
      
      <!-- Berita Internal -->
      <div class="mb-12">
        <h2 class="text-3xl font-bold mb-6 text-gray-800">Berita Internal</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {publishedNews.map(article => (
            <ArticleCard
              title={article.data.title}
              summary={article.data.summary}
              cover={article.data.cover}
              slug={article.data.slug}
              date={article.data.date}
              locale="id"
            />
          ))}
        </div>
      </div>

      <!-- Berita Eksternal -->
      <div>
        <h2 class="text-3xl font-bold mb-6 text-gray-800">Berita Eksternal</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <!-- Placeholder for external news -->
          <article class="bg-white border border-gray-300 rounded-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
            <img src="/images/logo-itb.png" alt="Berita Eksternal 1" class="w-full h-48 object-contain bg-gray-100">
            <div class="p-6">
              <h2 class="text-xl font-bold mb-3 leading-tight text-blue-900 hover:text-blue-700 transition-colors">
                <a href="#">Inovasi Teknologi AI Terbaru</a>
              </h2>
              <p class="text-gray-700 mb-4 line-clamp-3 text-sm leading-relaxed">Perkembangan terkini dalam bidang kecerdasan buatan yang mengubah dunia.</p>
              <div class="flex justify-between items-center">
                <time class="text-sm text-gray-500 font-medium">30 Oktober 2025</time>
                <a href="#" class="text-blue-600 hover:text-blue-800 font-semibold text-sm">Baca Selengkapnya →</a>
              </div>
            </div>
          </article>
          <article class="bg-white border border-gray-300 rounded-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
            <img src="/images/logo-itb.png" alt="Berita Eksternal 2" class="w-full h-48 object-contain bg-gray-100">
            <div class="p-6">
              <h2 class="text-xl font-bold mb-3 leading-tight text-blue-900 hover:text-blue-700 transition-colors">
                <a href="#">Kolaborasi Industri dan Akademik</a>
              </h2>
              <p class="text-gray-700 mb-4 line-clamp-3 text-sm leading-relaxed">Kerja sama antara perusahaan teknologi dan universitas untuk riset bersama.</p>
              <div class="flex justify-between items-center">
                <time class="text-sm text-gray-500 font-medium">29 Oktober 2025</time>
                <a href="#" class="text-blue-600 hover:text-blue-800 font-semibold text-sm">Baca Selengkapnya →</a>
              </div>
            </div>
          </article>
          <article class="bg-white border border-gray-300 rounded-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
            <img src="/images/logo-itb.png" alt="Berita Eksternal 3" class="w-full h-48 object-contain bg-gray-100">
            <div class="p-6">
              <h2 class="text-xl font-bold mb-3 leading-tight text-blue-900 hover:text-blue-700 transition-colors">
                <a href="#">Pengembangan Startup Teknologi</a>
              </h2>
              <p class="text-gray-700 mb-4 line-clamp-3 text-sm leading-relaxed">Cerita sukses startup yang berasal dari kampus.</p>
              <div class="flex justify-between items-center">
                <time class="text-sm text-gray-500 font-medium">28 Oktober 2025</time>
                <a href="#" class="text-blue-600 hover:text-blue-800 font-semibold text-sm">Baca Selengkapnya →</a>
              </div>
            </div>
          </article>
        </div>
      </div>
    </div>
  </section>
</Base>